/*!
 * jQuery Cookie Plugin v1.3.1
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2013 Klaus Hartl
 * Released under the MIT license
 */
(function(e){typeof define=="function"&&define.amd&&define.amd.jQuery?define(["jquery"],e):e(jQuery)})(function(e){function n(e){return e}function r(e){return decodeURIComponent(e.replace(t," "))}function i(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return s.json?JSON.parse(e):e}catch(t){}}var t=/\+/g,s=e.cookie=function(t,o,u){if(o!==undefined){u=e.extend({},s.defaults,u);if(typeof u.expires=="number"){var a=u.expires,f=u.expires=new Date;f.setDate(f.getDate()+a)}return o=s.json?JSON.stringify(o):String(o),document.cookie=[encodeURIComponent(t),"=",s.raw?o:encodeURIComponent(o),u.expires?"; expires="+u.expires.toUTCString():"",u.path?"; path="+u.path:"",u.domain?"; domain="+u.domain:"",u.secure?"; secure":""].join("")}var l=s.raw?n:r,c=document.cookie.split("; "),h=t?undefined:{};for(var p=0,d=c.length;p<d;p++){var v=c[p].split("="),m=l(v.shift()),g=l(v.join("="));if(t&&t===m){h=i(g);break}t||(h[m]=i(g))}return h};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t)!==undefined?(e.cookie(t,"",e.extend(n,{expires:-1})),!0):!1}}),function(e){typeof define=="function"&&define.amd?typeof jQuery!="undefined"?define(["jquery"],e):define([],e):typeof jQuery!="undefined"?e(jQuery):e()}(function(e,t){function a(e,t){var n=decodeURI(e),i=s[t||!1?"strict":"loose"].exec(n),o={attr:{},param:{},seg:{}},u=14;while(u--)o.attr[r[u]]=i[u]||"";return o.param.query=p(o.attr.query),o.param.fragment=p(o.attr.fragment),o.seg.path=o.attr.path.replace(/^\/+|\/+$/g,"").split("/"),o.seg.fragment=o.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),o.attr.base=o.attr.host?(o.attr.protocol?o.attr.protocol+"://"+o.attr.host:o.attr.host)+(o.attr.port?":"+o.attr.port:""):"",o}function f(e){var t=e.tagName;return typeof t!="undefined"?n[t.toLowerCase()]:t}function l(e,t){if(e[t].length==0)return e[t]={};var n={};for(var r in e[t])n[r]=e[t][r];return e[t]=n,n}function c(e,t,n,r){var i=e.shift();if(!i)g(t[n])?t[n].push(r):"object"==typeof t[n]?t[n]=r:"undefined"==typeof t[n]?t[n]=r:t[n]=[t[n],r];else{var s=t[n]=t[n]||[];"]"==i?g(s)?""!=r&&s.push(r):"object"==typeof s?s[y(s).length]=r:s=t[n]=[t[n],r]:~i.indexOf("]")?(i=i.substr(0,i.length-1),!u.test(i)&&g(s)&&(s=l(t,n)),c(e,s,i,r)):(!u.test(i)&&g(s)&&(s=l(t,n)),c(e,s,i,r))}}function h(e,t,n){if(~t.indexOf("]")){var r=t.split("["),i=r.length,s=i-1;c(r,e,"base",n)}else{if(!u.test(t)&&g(e.base)){var o={};for(var a in e.base)o[a]=e.base[a];e.base=o}d(e.base,t,n)}return e}function p(e){return m(String(e).split(/&|;/),function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(n){}var r=t.indexOf("="),i=v(t),s=t.substr(0,i||r),o=t.substr(i||r,t.length),o=o.substr(o.indexOf("=")+1,o.length);return""==s&&(s=t,o=""),h(e,s,o)},{base:{}}).base}function d(e,n,r){var i=e[n];t===i?e[n]=r:g(i)?i.push(r):e[n]=[i,r]}function v(e){var t=e.length,n,r;for(var i=0;i<t;++i){r=e[i],"]"==r&&(n=!1),"["==r&&(n=!0);if("="==r&&!n)return i}}function m(e,n){var r=0,i=e.length>>0,s=arguments[2];while(r<i)r in e&&(s=n.call(t,s,e[r],r,e)),++r;return s}function g(e){return Object.prototype.toString.call(e)==="[object Array]"}function y(e){var t=[];for(prop in e)e.hasOwnProperty(prop)&&t.push(prop);return t}function b(e,n){return arguments.length===1&&e===!0&&(n=!0,e=t),n=n||!1,e=e||window.location.toString(),{data:a(e,n),attr:function(e){return e=i[e]||e,typeof e!="undefined"?this.data.attr[e]:this.data.attr},param:function(e){return typeof e!="undefined"?this.data.param.query[e]:this.data.param.query},fparam:function(e){return typeof e!="undefined"?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return typeof e=="undefined"?this.data.seg.path:(e=e<0?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return typeof e=="undefined"?this.data.seg.fragment:(e=e<0?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}var n={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],i={anchor:"fragment"},s={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},o=Object.prototype.toString,u=/^[0-9]+$/;typeof e!="undefined"?(e.fn.url=function(t){var n="";return this.length&&(n=e(this).attr(f(this[0]))||""),b(n,t)},e.url=b):window.purl=b}),function(){var e,t;t=t!=null?t:this,e=Em.Object.extend(Em.Evented),t.Auth=e.create({authToken:null,currentUserId:null,currentUser:null,jqxhr:null,prevRoute:null,json:null,signIn:function(e){var t,n=this;return e==null&&(e={}),t=e.async!=null?e.async:!0,e.async!=null&&delete e.async,this.ajax({url:this.resolveUrl(Auth.Config.get("tokenCreateUrl")),type:"POST",data:e,async:t}).done(function(e,t,r){var i;return n.set("authToken",e[Auth.Config.get("tokenKey")]),n.set("currentUserId",e[Auth.Config.get("idKey")]),(i=Auth.Config.get("userModel"))&&n.set("currentUser",i.find(n.get("currentUserId"))),n.set("json",e),n.set("jqxhr",r),n.trigger("signInSuccess")}).fail(function(e){return n.set("jqxhr",e),n.trigger("signInError")}).always(function(e){return n.set("prevRoute",null),n.set("jqxhr",e),n.trigger("signInComplete")})},signOut:function(e){var t,n=this;return e==null&&(e={}),e[Auth.Config.get("tokenKey")]=this.get("authToken"),t=e.async!=null?e.async:!0,e.async!=null&&delete e.async,this.ajax({url:this.resolveUrl(Auth.Config.get("tokenDestroyUrl")),type:"DELETE",data:e,async:t}).done(function(e,t,r){return n.set("authToken",null),n.set("currentUserId",null),n.set("currentUser",null),n.set("jqxhr",r),n.set("json",e),n.trigger("signOutSuccess")}).fail(function(e){return n.set("jqxhr",e),n.trigger("signOutError")}).always(function(e){return n.set("prevRoute",null),n.set("jqxhr",e),n.trigger("signOutComplete")})},resolveUrl:function(e){var t;return t=Auth.Config.get("baseUrl"),t&&t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),(e!=null?e[0]:void 0)==="/"&&(e=e.substr(1,e.length)),[t,e].join("/")},resolveRedirectRoute:function(e){var t,n,r,i;return e!=="signIn"&&e!=="signOut"?null:(i=""+e[0].toUpperCase()+e.slice(1),n=Auth.Config.get("smart"+i+"Redirect"),t=Auth.Config.get(""+e+"RedirectFallbackRoute"),r=Auth.Config.get(""+e+"Route"),n?this.prevRoute==null||this.prevRoute===r?t:this.prevRoute:t)},ajax:function(e){var t,n,r,i,s,o,u,a,f,l;e==null&&(e={}),n={},n.dataType="json",e.data&&e.contentType==null&&e.type!=="GET"&&(n.contentType="application/json; charset=utf-8",e.data=JSON.stringify(e.data)),e=jQuery.extend(n,e);if(i=this.get("authToken"))switch(Auth.Config.get("requestTokenLocation")){case"param":e.data||(e.data={});switch(typeof e.data){case"object":window.FormData&&e.data instanceof window.FormData?e.data.append(Auth.Config.get("tokenKey"),this.get("authToken")):(s=e.data)[a=Auth.Config.get("tokenKey")]||(s[a]=this.get("authToken"));break;case"string":try{t=JSON.parse(e.data),t[f=Auth.Config.get("tokenKey")]||(t[f]=this.get("authToken")),e.data=JSON.stringify(t)}catch(c){r=c}}break;case"authHeader":e.headers||(e.headers={}),(o=e.headers).Authorization||(o.Authorization=""+Auth.Config.get("requestHeaderKey")+" "+this.get("authToken"));break;case"customHeader":e.headers||(e.headers={}),(u=e.headers)[l=Auth.Config.get("requestHeaderKey")]||(u[l]=this.get("authToken"))}return jQuery.ajax(e)}})}.call(this),function(){Auth.Config=Em.Object.create({tokenCreateUrl:null,tokenDestroyUrl:null,tokenKey:null,idKey:null,userModel:null,baseUrl:null,requestTokenLocation:"param",requestHeaderKey:null,signInRoute:null,signOutRoute:null,authRedirect:!1,smartSignInRedirect:!1,smartSignOutRedirect:!1,signInRedirectFallbackRoute:"index",signOutRedirectFallbackRoute:"index",rememberMe:!1,rememberTokenKey:null,rememberPeriod:14,rememberAutoRecall:!0,rememberAutoRecallRouteScope:"auth",rememberStorage:"cookie",urlAuthentication:!1,urlAuthenticationParamsKey:null,urlAuthenticationRouteScope:"auth"})}.call(this),function(){Auth.Route=Em.Route.extend(Em.Evented,{redirect:function(){if(Auth.get("authToken"))return this._super.apply(this,arguments);if(Auth.Config.get("urlAuthentication")){Auth.Module.UrlAuthentication.authenticate({async:!1});if(Auth.get("authToken"))return this._super.apply(this,arguments)}if(Auth.Config.get("rememberMe")&&Auth.Config.get("rememberAutoRecall")){Auth.Module.RememberMe.recall({async:!1});if(Auth.get("authToken"))return this._super.apply(this,arguments)}return this.trigger("authAccess"),Auth.Config.get("authRedirect")&&(Auth.set("prevRoute",this.routeName),this.transitionTo(Auth.Config.get("signInRoute"))),this._super.apply(this,arguments)}})}.call(this),function(){Em.Route.reopen({redirect:function(){if(Auth.Config.get("urlAuthentication")&&Auth.Config.get("urlAuthenticationRouteScope")==="both"){Auth.Module.UrlAuthentication.authenticate({async:!1});if(Auth.get("authToken"))return this._super.apply(this,arguments)}if(Auth.Config.get("rememberMe")&&Auth.Config.get("rememberAutoRecall")&&Auth.Config.get("rememberAutoRecallRouteScope")==="both"){Auth.Module.RememberMe.recall({async:!1});if(Auth.get("authToken"))return this._super.apply(this,arguments)}return this._super.apply(this,arguments)}})}.call(this),function(){Auth.SignInController=Em.Mixin.create({registerRedirect:function(){return Auth.addObserver("authToken",this,"smartSignInRedirect")},smartSignInRedirect:function(){if(Auth.get("authToken"))return this.transitionToRoute(Auth.resolveRedirectRoute("signIn")),Auth.removeObserver("authToken",this,"smartSignInRedirect")}})}.call(this),function(){Auth.SignOutController=Em.Mixin.create({registerRedirect:function(){return Auth.addObserver("authToken",this,"smartSignOutRedirect")},smartSignOutRedirect:function(){if(!Auth.get("authToken"))return this.transitionToRoute(Auth.resolveRedirectRoute("signOut")),Auth.removeObserver("authToken",this,"smartSignOutRedirect")}})}.call(this),function(){typeof DS!="undefined"&&DS!==null&&DS.RESTAdapter!=null&&(Auth.RESTAdapter=DS.RESTAdapter.extend({ajax:function(e,t,n){return n=n||{},n.url=e,n.type=t,n.context=this,Auth.ajax(n)}}))}.call(this),function(){Auth.Module=Em.Object.create()}.call(this),function(){Auth.Module.RememberMe=Em.Object.create({init:function(){var e=this;return Auth.on("signInSuccess",function(){return e.remember()}),Auth.on("signInError",function(){return e.forget()}),Auth.on("signOutSuccess",function(){return e.forget()})},recall:function(e){var t,n;e==null&&(e={});if(!Auth.Config.get("rememberMe"))return;if(!Auth.get("authToken")&&(n=this.retrieveToken()))return this.fromRecall=!0,t={},e.async!=null&&(t.async=e.async),t[Auth.Config.get("rememberTokenKey")]=n,Auth.signIn(t)},remember:function(){var e;if(!Auth.Config.get("rememberMe"))return;return e=Auth.get("json")[Auth.Config.get("rememberTokenKey")],e?e!==this.retrieveToken()&&this.storeToken(e):this.fromRecall||this.forget(),this.fromRecall=!1},forget:function(){if(!Auth.Config.get("rememberMe"))return;return this.removeToken()},retrieveToken:function(){switch(Auth.Config.get("rememberStorage")){case"localStorage":return localStorage.getItem("ember-auth-remember-me");case"cookie":return jQuery.cookie("ember-auth-remember-me")}},storeToken:function(e){switch(Auth.Config.get("rememberStorage")){case"localStorage":return localStorage.setItem("ember-auth-remember-me",e);case"cookie":return jQuery.cookie("ember-auth-remember-me",e,{expires:Auth.Config.get("rememberPeriod"),path:"/"})}},removeToken:function(){switch(Auth.Config.get("rememberStorage")){case"localStorage":return localStorage.removeItem("ember-auth-remember-me");case"cookie":return jQuery.removeCookie("ember-auth-remember-me",{path:"/"})}}})}.call(this),function(){Auth.Module.UrlAuthentication=Em.Object.create({authenticate:function(e){var t;e==null&&(e={});if(!Auth.Config.get("urlAuthentication"))return;if(Auth.get("authToken"))return;this.canonicalizeParams();if($.isEmptyObject(this.params))return;return t={},e.async!=null&&(t.async=e.async),t=$.extend(t,this.params),Auth.signIn(t)},retrieveParams:function(){var e;if(!Auth.Config.get("urlAuthentication"))return;return e=Auth.Config.get("urlAuthenticationParamsKey"),this.params=$.url().param(e)},canonicalizeParams:function(e){var t,n,r,i,s,o;e==null&&(e=this.params),r={};if(e==null)r={};else if($.isArray(e))for(n=s=0,o=e.length;s<o;n=++s)i=e[n],r[n]=i;else typeof e!="object"?r[String(e)]=String(e):r=e;t={};for(n in r)i=r[n],n=String(n),n&&n.charAt(n.length-1)==="/"&&(n=n.slice(0,-1)),typeof i=="object"?t[n]=this.canonicalizeParams(i):(i=String(i),i&&i.charAt(i.length-1)==="/"&&(i=i.slice(0,-1)),t[n]=i);return this.params=t}}),Em.Router.reopen({init:function(){return Auth.Config.get("urlAuthentication")&&Auth.Module.UrlAuthentication.retrieveParams(),this._super.apply(this,arguments)}})}.call(this),function(){}.call(this);